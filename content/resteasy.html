<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- TODO: set page title -->
        <title>[TITLE GOES HERE]</title>

        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/application.css">
    </head>
    <body>

        <script type="text/x-handlebars">
            <!-- Page header (currently unused) -->
            <div class="header">
                <img src="img/icon32.png">
                <h2>REST Easy</h2>
            </div>

            <!-- Request pane -->
            {{view RESTEasy.RequestView}}

            <!-- Splitter between panes -->
            {{view RESTEasy.SplitterView}}

            <!-- Response pane -->
            {{view RESTEasy.ResponseView}}

            <!-- Progress display -->
            {{view RESTEasy.ProgressView}}
        </script>

        <!-- Request view -->
        <script type="text/x-handlebars" data-template-name="app-request">
            <!-- Request method, URL, and send button -->
            <div class="float-left">
                {{combo-box choices=controller.methods selection=controller.method}}
            </div>
            <button class="float-right" {{action 'send'}}>Send</button>
            <div class="control">
                {{input placeholder='http://' value=controller.url}}
            </div>

            <!-- HTTP headers -->
            {{#collapsible-section title='Headers'}}
                <p class="help">The headers specified below will be added to the browser's default standard headers.</p>
                {{editable-table entries=controller.requestHeaders}}
            {{/collapsible-section}}

            <!-- POST data -->
            {{#collapsible-section title='POST Data'}}
                <div>TODO: feature not yet implemented.</div>
            {{/collapsible-section}}

            <!-- Authentication data -->
            {{#collapsible-section title='Authentication'}}
                <p class="help">The parameters provided below will be used for HTTP Basic Auth.</p>
                <div class="control">
                    {{input placeholder='Username' value=username}}
                </div>
                <div class="control">
                    {{input placeholder='Password' value=password}}
                </div>
            {{/collapsible-section}}
        </script>

        <!-- Response view -->
        <script type="text/x-handlebars" data-template-name="app-response">
            {{#tab-container activeTab='headers'}}
                {{tab-button name="headers" title="Headers"}}
                {{tab-button name="raw" title="Raw"}}
                {{tab-button name="preview" title="Preview"}}
                {{#tab-content name="headers"}}
                    {{#if response}}
                        <h2>{{response.status}}</h2>
                        <table>
                            <tr>
                                <th>Name</th>
                                <th>Value</th>
                            </tr>
                            {{#each response.headers}}
                                <tr>
                                    <td>{{name}}</td>
                                    <td>{{value}}</td>
                                </tr>
                            {{/each}}
                        </table>
                    {{/if}}
                {{/tab-content}}
                {{#tab-content name="raw"}}
                    {{#if response}}
                        <pre class="pre">{{response.raw}}</pre>
                    {{/if}}
                {{/tab-content}}
                {{#tab-content name="preview"}}
                    {{#if response }}
                        {{#if response.preview}}
                            <iframe type="content" {{bind-attr src=response.preview}}></iframe>
                        {{/if}}
                    {{/if}}
                {{/tab-content}}
            {{/tab-container}}
        </script>

        <!-- Progress view -->
        <script type="text/x-handlebars" data-template-name="app-progress">
            <div class="container">
                <p>Please wait - sending request...</p>
                <div class="bar"></div>
                <p>
                    <button {{action 'cancel'}}>Cancel</button>
                </p>
            </div>
        </script>

        <!-- Combo box control -->
        <script type="text/x-handlebars" data-template-name="components/combo-box">
            <button {{action 'toggle'}}>{{selection}}</button>
            <ul {{bind-attr class=':menu expanded'}}>
                {{#each choices}}
                    <li {{action 'select' this}}>{{this}}</li>
                {{/each}}
            </ul>
        </script>

        <!-- Collapsible section control -->
        <script type="text/x-handlebars" data-template-name="components/collapsible-section">
            <h4>
                <button {{bind-attr class=":expand expanded"}} {{action 'toggle'}}></button>
                {{title}}
            </h4>
            <div {{bind-attr class=":content expanded"}}>
                {{yield}}
            </div>
        </script>

        <!-- Editable table control -->
        <script type="text/x-handlebars" data-template-name="components/editable-table">
            <tr>
                <th>Name</th>
                <th>Value</th>
                <th></th>
            </tr>
            {{#each entries}}
                <tr>
                    <td>{{name}}</td>
                    <td>{{value}}</td>
                    <td>
                        <button {{action 'remove' this}}>&times;</button>
                    </td>
                </tr>
            {{else}}
                <tr>
                    <td colspan="3">
                        <p class="info">Table is empty</p>
                    </td>
                </tr>
            {{/each}}
            <tr>
                <td><div class="control">{{input placeholder='Name' value=name}}</div></td>
                <td><div class="control">{{input placeholder='Value' value=value}}</div></td>
                <td>
                    <button {{action 'add'}}>+</button>
                </td>
            </tr>
        </script>

        <!-- Tab button control -->
        <script type="text/x-handlebars" data-template-name="components/tab-button">
            {{title}}
        </script>

        <!-- Scripts -->
        <script src="vendor/js/jquery.min.js"></script>
        <script src="vendor/js/handlebars.min.js"></script>
        <script src="vendor/js/ember.min.js"></script>
        <script src="js/application.js"></script>
    </body>
</html>
