<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Page title is set by Ember -->

        <link rel="shortcut icon" href="img/icon16.png">
        <link rel="stylesheet" href="vendor/css/font-awesome.min.css">
        <link rel="stylesheet/less" type="text/css" href="less/application.less">
    </head>
    <body>
        <script type="text/x-handlebars">
            {{view RESTEasy.HeaderView}}
            {{view RESTEasy.RequestView}}
            {{view RESTEasy.SplitterView}}
            {{view RESTEasy.ResponseView}}

            <!-- Progress dialog for canceling the request -->
            {{#dialog-box active=controller.displayProgress}}
                <h4 class="title">Please Wait</h4>
                <p>Sending the request...</p>
                <div class="progress"></div>
                <div class="buttons">
                    <button {{action 'cancel'}}>
                        <span class="fa fa-close"></span>
                        Cancel
                    </button>
                </div>
            {{/dialog-box}}

            <!-- About dialog for describing the application -->
            {{#dialog-box active=controller.displayAbout}}
                <h4 class="title">{{t 'ui.title'}}</h4>
                <p>Created and maintained by Nathan Osman</p>
                <p>&copy; Copyright 2014</p>
                <div class="buttons">
                    <button {{action 'hideAbout'}}>
                        <span class="fa fa-close"></span>
                        Close
                    </button>
                </div>
            {{/dialog-box}}
        </script>

        <!-- Page header view-->
        <script type="text/x-handlebars" data-template-name="app-header">
            <div style="float: right;">
                <button {{action 'reset'}}>
                    <span class="fa fa-trash"></span>
                    Reset
                </button>
                <button {{action 'showAbout'}}>
                    <span class="fa fa-info-circle"></span>
                    About
                </button>
            </div>
            <img src="img/icon32.png" class="logo">
            <h2 class="title">{{t 'ui.title'}}</h2>
        </script>

        <!-- Request view -->
        <script type="text/x-handlebars" data-template-name="app-request">
            <!-- Request method, URL, and send button -->
            <div class="float-left">
                {{combo-box choices=controller.methods selection=controller.method}}
            </div>
            <button class="float-right" {{action 'send'}}>
                <span class="fa fa-send"></span>
                {{t 'ui.url.send'}}
            </button>
            <div class="control overflow-auto">
                {{input placeholder='http://' value=controller.url}}
            </div>

            <!-- HTTP headers -->
            {{#collapsible-section title='Headers'}}
                <p>The headers specified below will be added to any sent by the browser or specified elsewhere.</p>
                {{editable-table entries=controller.requestHeaders}}
            {{/collapsible-section}}

            <!-- Data -->
            {{#collapsible-section title='Data'}}
                <p>Select one of the options below to include data with the request.</p>
                {{combo-box choices=controller.dataModes selection=controller.dataMode}}
                {{#if view.dmForm}}
                    <p>Select an appropriate MIME type for the form and use the table below to enter data.</p>
                    {{combo-box choices=controller.formTypes selection=controller.formType}}
                    {{editable-table entries=controller.formData}}
                {{/if}}
                {{#if view.dmCustom}}
                    <p>Enter the data and its corresponding MIME type below.</p>
                    <div class="control">
                        {{input placeholder='MIME type' value=controller.dataType}}
                        {{textarea value=controller.dataCustom rows=6}}
                    </div>
                {{/if}}
            {{/collapsible-section}}

            <!-- Authentication data -->
            {{#collapsible-section title='Authentication'}}
                <p>The parameters provided below will be used for HTTP Basic Auth.</p>
                <div class="control">
                    {{input placeholder='Username' value=username}}
                </div>
                <div class="control">
                    {{input placeholder='Password' value=password}}
                </div>
            {{/collapsible-section}}
        </script>

        <!-- Response view -->
        <script type="text/x-handlebars" data-template-name="app-response">
            {{#tab-container activeTab='headers'}}
                {{tab-button name="headers" title="Headers"}}
                {{tab-button name="raw" title="Raw"}}
                {{tab-button name="preview" title="Preview"}}
                {{#tab-content name="headers"}}
                    {{#if response}}
                        <h2>{{response.status}} {{response.statusText}}</h2>
                        <table class="table">
                            <tr>
                                <th>Name</th>
                                <th>Value</th>
                            </tr>
                            {{#each response.headers}}
                                <tr class="data">
                                    <td>{{name}}</td>
                                    <td>{{value}}</td>
                                </tr>
                            {{/each}}
                        </table>
                    {{/if}}
                {{/tab-content}}
                {{#tab-content name="raw"}}
                    {{#if response}}
                        <pre class="pre">{{response.raw}}</pre>
                    {{/if}}
                {{/tab-content}}
                {{#tab-content name="preview"}}
                    {{#if response }}
                        {{#if response.preview}}
                            <iframe type="content" {{bind-attr src=response.preview}}></iframe>
                        {{/if}}
                    {{/if}}
                {{/tab-content}}
            {{/tab-container}}
        </script>

        <!-- Combo box control -->
        <script type="text/x-handlebars" data-template-name="components/combo-box">
            <button {{action 'toggle'}}>{{selection}}</button>
            <ul {{bind-attr class=':menu expanded'}}>
                {{#each choices}}
                    <li {{action 'select' this}}>{{this}}</li>
                {{/each}}
            </ul>
        </script>

        <!-- Collapsible section control -->
        <script type="text/x-handlebars" data-template-name="components/collapsible-section">
            <h4 class="title" {{action 'toggle'}}>
                <button>
                    <span {{bind-attr class=":fa buttonClass"}}></span>
                </button>
                {{title}}
            </h4>
            <div {{bind-attr class=":content expanded"}}>
                {{yield}}
            </div>
        </script>

        <!-- Editable table control -->
        <script type="text/x-handlebars" data-template-name="components/editable-table">
            <tr>
                <th>Name</th>
                <th>Value</th>
                <th class="collapse"></th>
            </tr>
            {{#each entries}}
                <tr class="data">
                    <td>{{name}}</td>
                    <td>{{value}}</td>
                    <td>
                        <button {{action 'remove' this}} title="Remove header">
                            <span class="fa fa-trash"></span>
                        </button>
                    </td>
                </tr>
            {{else}}
                <tr>
                    <td colspan="3">
                        <p class="info">Table is empty</p>
                    </td>
                </tr>
            {{/each}}
            <tr>
                <td><div class="control">{{input placeholder='Name' value=name}}</div></td>
                <td><div class="control">{{input placeholder='Value' value=value}}</div></td>
                <td>
                    <button {{action 'add'}} title="Add header">
                        <span class="fa fa-plus"></span>
                    </button>
                </td>
            </tr>
        </script>

        <!-- Tab button control -->
        <script type="text/x-handlebars" data-template-name="components/tab-button">
            {{title}}
        </script>

        <!-- Dialog box control -->
        <script type="text/x-handlebars" data-template-name="components/dialog-box">
            <div class="content">
                {{yield}}
            </div>
        </script>

        <!-- Scripts -->
        <script src="vendor/js/less.min.js"></script>
        <script src="vendor/js/jquery.min.js"></script>
        <script src="vendor/js/handlebars.min.js"></script>
        <script src="vendor/js/ember.min.js"></script>
        <script src="vendor/js/i18n.min.js"></script>
        <script src="js/application.js"></script>
    </body>
</html>
